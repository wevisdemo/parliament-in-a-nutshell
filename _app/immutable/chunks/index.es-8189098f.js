import{r as A,i as W}from"./resolve-elements.es-2caf236e.js";import{p as P,i as b,b as T,d as B,n as k}from"./animate.es-da432c65.js";const S=e=>typeof e=="string";function I(e,s){return s?e*(1e3/s):0}function R(e,s){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)s.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]]);return n}const v=new WeakMap;let d;function M(e,s){if(s){const{inlineSize:n,blockSize:t}=s[0];return{width:n,height:t}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function _({target:e,contentRect:s,borderBoxSize:n}){var t;(t=v.get(e))===null||t===void 0||t.forEach(i=>{i({target:e,contentSize:s,get size(){return M(e,n)}})})}function j(e){e.forEach(_)}function F(){typeof ResizeObserver>"u"||(d=new ResizeObserver(j))}function N(e,s){d||F();const n=A(e);return n.forEach(t=>{let i=v.get(t);i||(i=new Set,v.set(t,i)),i.add(s),d==null||d.observe(t)}),()=>{n.forEach(t=>{const i=v.get(t);i==null||i.delete(s),i!=null&&i.size||d==null||d.unobserve(t)})}}const w=new Set;let p;function D(){p=()=>{const e={width:window.innerWidth,height:window.innerHeight},s={target:window,size:e,contentSize:e};w.forEach(n=>n(s))},window.addEventListener("resize",p)}function G(e){return w.add(e),p||D(),()=>{w.delete(e),!w.size&&p&&(p=void 0)}}function C(e,s){return W(e)?G(e):N(e,s)}const V=50,O=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),q=()=>({time:0,x:O(),y:O()}),$={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function x(e,s,n,t){const i=n[s],{length:r,position:o}=$[s],u=i.current,h=n.time;i.current=e["scroll"+o],i.scrollLength=e["scroll"+r]-e["client"+r],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=P(0,i.scrollLength,i.current);const l=t-h;i.velocity=l>V?0:I(i.current-u,l)}function J(e,s,n){x(e,"x",s,n),x(e,"y",s,n),s.time=n}function K(e,s){let n={x:0,y:0},t=e;for(;t&&t!==s;)if(t instanceof HTMLElement)n.x+=t.offsetLeft,n.y+=t.offsetTop,t=t.offsetParent;else if(t instanceof SVGGraphicsElement&&"getBBox"in t){const{top:i,left:r}=t.getBBox();for(n.x+=r,n.y+=i;t&&t.tagName!=="svg";)t=t.parentNode}return n}const Q={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},y={start:0,center:.5,end:1};function z(e,s,n=0){let t=0;if(y[e]!==void 0&&(e=y[e]),S(e)){const i=parseFloat(e);e.endsWith("px")?t=i:e.endsWith("%")?e=i/100:e.endsWith("vw")?t=i/100*document.documentElement.clientWidth:e.endsWith("vh")?t=i/100*document.documentElement.clientHeight:e=i}return b(e)&&(t=s*e),n+t}const U=[0,0];function X(e,s,n,t){let i=Array.isArray(e)?e:U,r=0,o=0;return b(e)?i=[e,e]:S(e)&&(e=e.trim(),e.includes(" ")?i=e.split(" "):i=[e,y[e]?e:"0"]),r=z(i[0],n,t),o=z(i[1],s),r-o}const Y={x:0,y:0};function Z(e,s,n){let{offset:t=Q.All}=n;const{target:i=e,axis:r="y"}=n,o=r==="y"?"height":"width",u=i!==e?K(i,e):Y,h=i===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:i.clientWidth,height:i.clientHeight},l={width:e.clientWidth,height:e.clientHeight};s[r].offset.length=0;let f=!s[r].interpolate;const a=t.length;for(let c=0;c<a;c++){const E=X(t[c],l[o],h[o],u[r]);!f&&E!==s[r].interpolatorOffsets[c]&&(f=!0),s[r].offset[c]=E}f&&(s[r].interpolate=T(B(a),s[r].offset),s[r].interpolatorOffsets=[...s[r].offset]),s[r].progress=s[r].interpolate(s[r].current)}function ee(e,s=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,s!==e){let t=s;for(;t&&t!=e;)n.x.targetOffset+=t.offsetLeft,n.y.targetOffset+=t.offsetTop,t=t.offsetParent}n.x.targetLength=s===e?s.scrollWidth:s.clientWidth,n.y.targetLength=s===e?s.scrollHeight:s.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function te(e,s,n,t={}){const i=t.axis||"y";return{measure:()=>ee(e,t.target,n),update:r=>{J(e,n,r),(t.offset||t.target)&&Z(e,n,t)},notify:W(s)?()=>s(n):ne(s,n[i])}}function ne(e,s){return e.pause(),e.forEachNative((n,{easing:t})=>{var i,r;if(n.updateDuration)t||(n.easing=k),n.updateDuration(1);else{const o={duration:1e3};t||(o.easing="linear"),(r=(i=n.effect)===null||i===void 0?void 0:i.updateTiming)===null||r===void 0||r.call(i,o)}}),()=>{e.currentTime=s.progress}}const g=new WeakMap,L=new WeakMap,m=new WeakMap,H=e=>e===document.documentElement?window:e;function re(e,s={}){var{container:n=document.documentElement}=s,t=R(s,["container"]);let i=m.get(n);i||(i=new Set,m.set(n,i));const r=q(),o=te(n,e,r,t);if(i.add(o),!g.has(n)){const l=()=>{const a=performance.now();for(const c of i)c.measure();for(const c of i)c.update(a);for(const c of i)c.notify()};g.set(n,l);const f=H(n);window.addEventListener("resize",l,{passive:!0}),n!==document.documentElement&&L.set(n,C(n,l)),f.addEventListener("scroll",l,{passive:!0})}const u=g.get(n),h=requestAnimationFrame(u);return()=>{var l;typeof e!="function"&&e.stop(),cancelAnimationFrame(h);const f=m.get(n);if(!f||(f.delete(o),f.size))return;const a=g.get(n);g.delete(n),a&&(H(n).removeEventListener("scroll",a),(l=L.get(n))===null||l===void 0||l(),window.removeEventListener("resize",a))}}export{Q as S,re as s};
